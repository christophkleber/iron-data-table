<!DOCTYPE html>
<html>

<head>
  <script type="text/javascript" src="../bower_components/webcomponentsjs/webcomponents.js"></script>
  <link rel="import" href="common.html">
</head>

<body unresolved>


    <template is="dom-bind">
      <iron-ajax url="https://raw.githubusercontent.com/christophkleber/data/master/data.json" last-response="{{data}}" auto></iron-ajax>
      <iron-data-table items="[[data]]" selectable multi-selection class="adaptive-polymer-element">
        <data-table-column name="Anrede">
          <template>[[item.name.title]]</template>
        </data-table-column>
        <data-table-column name="Vorname">
          <template>[[item.name.first]]</template>
        </data-table-column>
        <data-table-column name="Nachname">
          <template>[[item.name.last]]</template>
        </data-table-column>
        <data-table-column name="Alter">
          <template>[[item.name.age]]</template>
        </data-table-column>
      </iron-data-table>
    </template>



  </div>
</body>
<script>
  window.onload = function loadDoc() {
    console.log('xmlhttp');
    var xhttpreq;
    try{
      //Moderner Browser
      xhttpreq = new XMLHttpRequest();
    }catch (e){
      //Internet Explorer 5+
      try{
        xhttpreq = new ActiveXObject("Msxml2.XMLHTTP");
      }catch (e) {
        //Internet Explorer 5
        try{
          xhttpreq = new ActiveXObject("Microsoft.XMLHTTP");
        }catch (e){
          //Wird nicht unterst√ºtzt
          alert('XMLHTTP not supported');
          return false;
        }

      }
    }
    xhttpreq.onreadystatechange = function() {
      if (this.readyState == 4 && this.status == 200) {
        var jsonObj = JSON.parse(xhttpreq.responseText);
        console.log(jsonObj);
        var adaptiveElements = document.querySelectorAll('.adaptive-polymer-element');
        for (var i = 0; i < adaptiveElements.length; i++) {
          for (var prop in jsonObj[0]) {
            adaptiveElements[i].setAttribute(prop, jsonObj[0][prop]);
          }
        }
      }
    };
    xhttpreq.open("GET", 'https://raw.githubusercontent.com/christophkleber/data/master/person-two.json', true);
    xhttpreq.send();

  }
</script>

</html>
